(()=>{var q=new WeakMap;function B(t){return q.has(t)||q.set(t,{activeTransforms:[],activeAnimations:{}}),q.get(t)}function Q(t,e){t.indexOf(e)===-1&&t.push(e)}var A=()=>{},j=t=>t;var It=["","X","Y","Z"],Dt=["translate","scale","rotate","skew"],K={x:"translateX",y:"translateY",z:"translateZ"},Y={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:t=>t+"deg"},Pt={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:t=>t+"px"},rotate:Y,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:j},skew:Y},v=new Map,R=t=>`--motion-${t}`,C=["x","y","z"];Dt.forEach(t=>{It.forEach(e=>{C.push(t+e),v.set(R(t+e),Pt[t])})});var Ft=(t,e)=>C.indexOf(t)-C.indexOf(e),Mt=new Set(C),tt=t=>Mt.has(t),et=(t,e)=>{let{activeTransforms:s}=B(t);Q(s,e),t.style.transform=Vt(s)},Vt=t=>t.sort(Ft).reduce(Bt,"").trim(),Bt=(t,e)=>`${t} ${e}(var(${R(e)}))`;var L=t=>t.startsWith("--"),st=new Set;function it(t){if(!st.has(t)){st.add(t);try{let{syntax:e,initialValue:s}=v.has(t)?v.get(t):{};CSS.registerProperty({name:t,inherits:!1,syntax:e,initialValue:s})}catch(e){}}}var O=t=>t*1e3;function k(t){try{t.playState!=="finished"&&t.commitStyles(),t.cancel()}catch(e){}}var Rt=t=>Array.isArray(t)&&typeof t[0]=="number",E=t=>Array.isArray(t)&&typeof t[0]!="number",W=t=>Rt(t)?Ct(t):t,Ct=([t,e,s,i])=>`cubic-bezier(${t}, ${e}, ${s}, ${i})`;var rt=t=>document.createElement("div").animate(t,{duration:.001}),nt={cssRegisterProperty:()=>typeof CSS!="undefined"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{rt({opacity:[1]})}catch(t){return!1}return!0},finished:()=>Boolean(rt({opacity:[0,1]}).finished)},_={},U=Object.keys(nt).reduce((t,e)=>(t[e]=()=>(_[e]===void 0&&(_[e]=nt[e]()),_[e]),t),{});var ot=(t,e)=>s=>t.style.setProperty(e,s),at=(t,e)=>s=>t.style[e]=s;var m={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"};var ct=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,Lt=1e-7,kt=12;function Ut(t,e,s,i,o){let n,r,p=0;do r=e+(s-e)/2,n=ct(r,i,o)-t,n>0?s=r:e=r;while(Math.abs(n)>Lt&&++p<kt);return r}function I(t,e,s,i){if(t===e&&s===i)return j;let o=n=>Ut(n,0,1,t,s);return n=>n===0||n===1?n:ct(o(n),e,i)}var lt=(t,e,s)=>Math.min(Math.max(s,t),e);var mt=(t,e="end")=>s=>{s=e==="end"?Math.min(s,.999):Math.max(s,.001);let i=s*t,o=e==="end"?Math.floor(i):Math.ceil(i);return lt(0,1,o/t)};var ut={ease:I(.25,.1,.25,1),"ease-in":I(.42,0,1,1),"ease-in-out":I(.42,0,.58,1),"ease-out":I(0,0,.58,1)},zt=/\((.*?)\)/;function X(t){if(typeof t=="function")return t;if(Array.isArray(t))return I(...t);if(ut[t])return ut[t];if(t.startsWith("steps")){let e=zt.exec(t);if(e){let s=e[1].split(",");return mt(parseFloat(s[0]),s[1].trim())}}return j}var z=(t,e,s)=>-s*t+s*e+t;var $=(t,e,s)=>e-t==0?1:(s-t)/(e-t);var ft=(t,e,s)=>{let i=e-t;return((s-t)%i+i)%i+t};function pt(t,e){return E(t)?t[ft(0,t.length,e)]:t}function Z(t,e){let s=t[t.length-1];for(let i=1;i<=e;i++){let o=$(0,e,i);t.push(z(s,1,o))}}function dt(t){let e=[0];return Z(e,t-1),e}var $t=t=>Math.min(1,Math.max(t,0));function ht(t,e=dt(t.length),s=j){let i=t.length,o=i-e.length;return o>0&&Z(e,o),n=>{let r=0;for(;r<i-2&&!(n<e[r+1]);r++);let p=$t($(e[r],e[r+1],n));return p=pt(s,r)(p),z(t[r],t[r+1],p)}}var gt=class{constructor(e,s,{easing:i=m.easing,duration:o=m.duration,delay:n=m.delay,endDelay:r=m.endDelay,offset:p,repeat:d=m.repeat,direction:g="normal"}){this.startTime=0,this.rate=1,this.t=0,this.cancelT=0,this.playState="idle",this.finished=new Promise((x,f)=>{this.resolve=x,this.reject=f});let b=o*(d+1),M=ht(s,p,E(i)?i.map(X):X(i));this.tick=x=>{if(this.playState==="finished"){let V=M(1);e(V),this.resolve(V);return}this.pauseTime&&(x=this.pauseTime);let f=(x-this.startTime)*this.rate;this.t=f,f/=1e3,f=Math.max(f-n,0);let h=f/o,D=Math.floor(h),c=h%1;!c&&h>=1&&(c=1),c===1&&D--;let a=D%2;(g==="reverse"||g==="alternate"&&a||g==="alternate-reverse"&&!a)&&(c=1-c);let u=f>=b?1:Math.min(c,1),S=M(u);e(S),f>=b+r?(this.playState="finished",this.resolve(S)):this.playState!=="idle"&&requestAnimationFrame(this.tick)},this.play()}play(){let e=performance.now();this.playState="running",this.pauseTime?this.startTime=e-(this.pauseTime-this.startTime):this.startTime||(this.startTime=e),this.pauseTime=void 0,requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=performance.now()}finish(){this.playState="finished",this.tick(0)}cancel(){this.playState="idle",this.tick(this.cancelT),this.reject(!1)}reverse(){this.rate*=-1}commitStyles(){this.cancelT=this.t}get currentTime(){return this.t}set currentTime(e){this.pauseTime||this.rate===0?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}};function yt(t,e=[0,1],s={}){return new gt(t,e,s)}var P={get:(t,e)=>{let s=L(e)?t.style.getPropertyValue(e):getComputedStyle(t)[e];if(!s&&s!==0){let i=v.get(e);i&&(s=i.initialValue)}return s}};function xt(t,e,s){for(let i=0;i<t.length;i++)t[i]===null&&(t[i]=i?t[i-1]:P.get(e,s));return t}var jt=t=>Array.isArray(t)?t:[t];function vt(t,e,s,i={}){let{duration:o=m.duration,delay:n=m.delay,endDelay:r=m.endDelay,repeat:p=m.repeat,easing:d=m.easing,direction:g,offset:b,allowWebkitAcceleration:M=!1}=i,x=B(t),f=U.waapi(),h=A,D=tt(e);D&&(K[e]&&(e=K[e]),et(t,e),e=R(e));let c=v.get(e),a=xt(jt(s),t,e);Nt(x,e),L(e)?(h=ot(t,e),U.cssRegisterProperty()?it(e):f=!1):h=at(t,e);let l;if(f){c&&(a=a.map(w=>typeof w=="number"?c.toDefaultUnit(w):w)),!U.partialKeyframes()&&a.length===1&&a.unshift(P.get(t,e));let u={delay:O(n),duration:O(o),endDelay:O(r),easing:E(d)?void 0:W(d),direction:g,iterations:p+1,fill:"forwards"};l=t.animate({[e]:a,offset:b,easing:E(d)?d.map(W):void 0},u),l.finished||(l.finished=new Promise((w,V)=>{l.onfinish=w,l.oncancel=V}));let S=a[a.length-1];l.finished.then(()=>h(S)).catch(A),M||(l.playbackRate=1.000001)}else if(D&&a.every(qt)){if(a.length===1&&a.unshift(P.get(t,e)||(c==null?void 0:c.initialValue)||0),a=a.map(u=>typeof u=="string"?parseFloat(u):u),c){let u=h;h=S=>u(c.toDefaultUnit(S))}l=yt(h,a,i)}else{let u=a[a.length-1];h(c&&typeof u=="number"?c.toDefaultUnit(u):u)}return x.activeAnimations[e]=l,l==null||l.finished.then(()=>x.activeAnimations[e]=void 0).catch(A),l}function Nt(t,e){t.activeAnimations[e]&&(k(t.activeAnimations[e]),t.activeAnimations[e]=void 0)}var qt=t=>typeof t=="number";var bt=(t,e)=>t[e]?Object.assign(Object.assign({},t),t[e]):Object.assign({},t);function Et(t,e){var s;return typeof t=="string"?e?((s=e[t])!==null&&s!==void 0||(e[t]=document.querySelectorAll(t)),t=e[t]):t=document.querySelectorAll(t):t instanceof Element&&(t=[t]),Array.from(t)}var Tt=(t,e)=>new Proxy({animations:t,duration:e},Kt),St=t=>t.animations[0],Kt={get:(t,e)=>{var s,i;switch(e){case"duration":return t.duration;case"currentTime":let o=((s=St(t))===null||s===void 0?void 0:s[e])||0;return o?o/1e3:0;case"playbackRate":return(i=St(t))===null||i===void 0?void 0:i[e];case"finished":return t.finished||(t.finished=Promise.all(t.animations.map(Wt)).catch(A)),t.finished;case"stop":return()=>t.animations.forEach(k);default:return()=>t.animations.forEach(n=>n[e]())}},set:(t,e,s)=>{switch(e){case"currentTime":s=O(s);case"currentTime":case"playbackRate":for(let i=0;i<t.animations.length;i++)t.animations[i][e]=s;return!0}return!1}},Wt=t=>t.finished;function wt(t,e,s){return typeof t=="function"?t(e,s):t}function H(t,e,s={}){var i;t=Et(t);let o=[],n=t.length;for(let r=0;r<n;r++){let p=t[r];for(let d in e){let g=bt(s,d);g.delay=wt(g.delay,r,n);let b=vt(p,d,e[d],g);b&&o.push(b)}}return Tt(o,(i=s.duration)!==null&&i!==void 0?i:m.duration)}var At=(Math.random()*1e4).toString().substr(0,4),y,G,J=!0,F=new Peer(At),T=document.getElementById("localVideo"),N=document.getElementById("remoteVideo"),_t=document.getElementById("callButton"),Xt=document.getElementById("answer"),Zt=document.getElementById("camera"),Ht=document.getElementById("mic"),Gt=document.getElementById("camSwitch"),Jt=document.getElementById("hangUp"),Qt=document.getElementById("toggleFullScreen"),Yt=document.getElementById("input"),te=document.getElementById("number");function Ot(t){H(T,{x:120,y:150,scale:.2},{duration:.5}),N.classList.add("active"),N.srcObject=t}window.onload=async()=>{y=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0})};var ee=document.createTextNode(At);te.appendChild(ee);Gt.addEventListener("click",async()=>{J=!J,T.srcObject.getTracks().forEach(t=>{t.stop()}),y=await navigator.mediaDevices.getUserMedia({audio:!0,video:{facingMode:J?"user":"environment"}}),T.srcObject=y});Zt.addEventListener("click",async()=>{y=await navigator.mediaDevices.getUserMedia({video:!1,audio:!0})});Ht.addEventListener("click",async()=>{y=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1})});Qt.addEventListener("click",()=>se());function se(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()}_t.onclick=()=>{T.srcObject=y,G=F.call(Yt.value,y),G.on("stream",Ot)};F.on("call",t=>{let e=document.createElement("H2"),s=document.createTextNode(`The ID ${t.peer} is calling...`);e.appendChild(s),document.body.appendChild(e),Xt.addEventListener("click",()=>{t.answer(y),T.srcObject=y,t.on("stream",Ot)})});Jt.addEventListener("click",()=>{G.close(),F.disconnect(),T.srcObject=null,N.srcObject=null});F.on("close",()=>{F.disconnect(),T.srcObject=null,N.srcObject=null});})();

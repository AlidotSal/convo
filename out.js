(()=>{var o=(Math.random()*1e4).toString().substr(0,4),e,a=new Peer(o);window.onload=async()=>{e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0})};var n=document.getElementById("localVideo"),d=document.getElementById("remoteVideo"),i=document.getElementById("callButton"),r=document.getElementById("camSwitch"),l=document.getElementById("input"),m=document.getElementById("number"),s=document.createTextNode(o);m.appendChild(s);r.addEventListener("click",async()=>{e=await navigator.mediaDevices.getUserMedia({audio:!0,video:{facingMode:{exact:"environment"}}})});i.onclick=()=>{n.srcObject=e;let t=a.call(l.value,e);n.onloadedmetadata=function(){n.play()},t.on("stream",c=>{d.srcObject=c})};a.on("call",t=>{t.answer(e),n.srcObject=e,t.on("stream",c=>{d.srcObject=c})});})();

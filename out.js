(()=>{var l=(Math.random()*1e4).toString().substr(0,4),e,o=!0,d=new Peer(l),n=document.getElementById("localVideo"),a=document.getElementById("remoteVideo"),r=document.getElementById("callButton"),i=document.getElementById("camSwitch"),s=document.getElementById("toggleFullScreen"),m=document.getElementById("input"),u=document.getElementById("number");window.onload=async()=>{e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0})};var g=document.createTextNode(l);u.appendChild(g);i.addEventListener("click",async()=>{o=!o,n.srcObject.getTracks().forEach(t=>{t.stop()}),e=await navigator.mediaDevices.getUserMedia({audio:!0,video:{facingMode:o?"user":"environment"}}),n.srcObject=e});s.addEventListener("click",()=>E());function E(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()}r.onclick=()=>{n.srcObject=e,d.call(m.value,e).on("stream",c=>{a.srcObject=c})};d.on("call",t=>{t.answer(e),n.srcObject=e,t.on("stream",c=>{a.srcObject=c})});})();

(()=>{var q=new WeakMap;function R(t){return q.has(t)||q.set(t,{activeTransforms:[],activeAnimations:{}}),q.get(t)}function Q(t,e){t.indexOf(e)===-1&&t.push(e)}var w=()=>{},x=t=>t;var It=["","X","Y","Z"],Pt=["translate","scale","rotate","skew"],K={x:"translateX",y:"translateY",z:"translateZ"},Y={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:t=>t+"deg"},Dt={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:t=>t+"px"},rotate:Y,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:x},skew:Y},j=new Map,C=t=>`--motion-${t}`,B=["x","y","z"];Pt.forEach(t=>{It.forEach(e=>{B.push(t+e),j.set(C(t+e),Dt[t])})});var Ft=(t,e)=>B.indexOf(t)-B.indexOf(e),Mt=new Set(B),tt=t=>Mt.has(t),et=(t,e)=>{let{activeTransforms:s}=R(t);Q(s,e),t.style.transform=Vt(s)},Vt=t=>t.sort(Ft).reduce(Rt,"").trim(),Rt=(t,e)=>`${t} ${e}(var(${C(e)}))`;var L=t=>t.startsWith("--"),st=new Set;function rt(t){if(!st.has(t)){st.add(t);try{let{syntax:e,initialValue:s}=j.has(t)?j.get(t):{};CSS.registerProperty({name:t,inherits:!1,syntax:e,initialValue:s})}catch(e){}}}var O=t=>t*1e3;function k(t){try{t.playState!=="finished"&&t.commitStyles(),t.cancel()}catch(e){}}var Ct=t=>Array.isArray(t)&&typeof t[0]=="number",v=t=>Array.isArray(t)&&typeof t[0]!="number",W=t=>Ct(t)?Bt(t):t,Bt=([t,e,s,r])=>`cubic-bezier(${t}, ${e}, ${s}, ${r})`;var it=t=>document.createElement("div").animate(t,{duration:.001}),nt={cssRegisterProperty:()=>typeof CSS!="undefined"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{it({opacity:[1]})}catch(t){return!1}return!0},finished:()=>Boolean(it({opacity:[0,1]}).finished)},_={},U=Object.keys(nt).reduce((t,e)=>(t[e]=()=>(_[e]===void 0&&(_[e]=nt[e]()),_[e]),t),{});var ot=(t,e)=>s=>t.style.setProperty(e,s),at=(t,e)=>s=>t.style[e]=s;var m={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"};var ct=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,Lt=1e-7,kt=12;function Ut(t,e,s,r,o){let n,i,p=0;do i=e+(s-e)/2,n=ct(i,r,o)-t,n>0?s=i:e=i;while(Math.abs(n)>Lt&&++p<kt);return i}function I(t,e,s,r){if(t===e&&s===r)return x;let o=n=>Ut(n,0,1,t,s);return n=>n===0||n===1?n:ct(o(n),e,r)}var lt=(t,e,s)=>Math.min(Math.max(s,t),e);var mt=(t,e="end")=>s=>{s=e==="end"?Math.min(s,.999):Math.max(s,.001);let r=s*t,o=e==="end"?Math.floor(r):Math.ceil(r);return lt(0,1,o/t)};var ut={ease:I(.25,.1,.25,1),"ease-in":I(.42,0,1,1),"ease-in-out":I(.42,0,.58,1),"ease-out":I(0,0,.58,1)},zt=/\((.*?)\)/;function X(t){if(typeof t=="function")return t;if(Array.isArray(t))return I(...t);if(ut[t])return ut[t];if(t.startsWith("steps")){let e=zt.exec(t);if(e){let s=e[1].split(",");return mt(parseFloat(s[0]),s[1].trim())}}return x}var z=(t,e,s)=>-s*t+s*e+t;var $=(t,e,s)=>e-t==0?1:(s-t)/(e-t);var ft=(t,e,s)=>{let r=e-t;return((s-t)%r+r)%r+t};function pt(t,e){return v(t)?t[ft(0,t.length,e)]:t}function Z(t,e){let s=t[t.length-1];for(let r=1;r<=e;r++){let o=$(0,e,r);t.push(z(s,1,o))}}function dt(t){let e=[0];return Z(e,t-1),e}var $t=t=>Math.min(1,Math.max(t,0));function ht(t,e=dt(t.length),s=x){let r=t.length,o=r-e.length;return o>0&&Z(e,o),n=>{let i=0;for(;i<r-2&&!(n<e[i+1]);i++);let p=$t($(e[i],e[i+1],n));return p=pt(s,i)(p),z(t[i],t[i+1],p)}}var gt=class{constructor(e,s,{easing:r=m.easing,duration:o=m.duration,delay:n=m.delay,endDelay:i=m.endDelay,offset:p,repeat:d=m.repeat,direction:g="normal"}){this.startTime=0,this.rate=1,this.t=0,this.cancelT=0,this.playState="idle",this.finished=new Promise((y,f)=>{this.resolve=y,this.reject=f});let b=o*(d+1),M=ht(s,p,v(r)?r.map(X):X(r));this.tick=y=>{if(this.playState==="finished"){let V=M(1);e(V),this.resolve(V);return}this.pauseTime&&(y=this.pauseTime);let f=(y-this.startTime)*this.rate;this.t=f,f/=1e3,f=Math.max(f-n,0);let h=f/o,P=Math.floor(h),c=h%1;!c&&h>=1&&(c=1),c===1&&P--;let a=P%2;(g==="reverse"||g==="alternate"&&a||g==="alternate-reverse"&&!a)&&(c=1-c);let u=f>=b?1:Math.min(c,1),S=M(u);e(S),f>=b+i?(this.playState="finished",this.resolve(S)):this.playState!=="idle"&&requestAnimationFrame(this.tick)},this.play()}play(){let e=performance.now();this.playState="running",this.pauseTime?this.startTime=e-(this.pauseTime-this.startTime):this.startTime||(this.startTime=e),this.pauseTime=void 0,requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=performance.now()}finish(){this.playState="finished",this.tick(0)}cancel(){this.playState="idle",this.tick(this.cancelT),this.reject(!1)}reverse(){this.rate*=-1}commitStyles(){this.cancelT=this.t}get currentTime(){return this.t}set currentTime(e){this.pauseTime||this.rate===0?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}};function yt(t,e=[0,1],s={}){return new gt(t,e,s)}var D={get:(t,e)=>{let s=L(e)?t.style.getPropertyValue(e):getComputedStyle(t)[e];if(!s&&s!==0){let r=j.get(e);r&&(s=r.initialValue)}return s}};function xt(t,e,s){for(let r=0;r<t.length;r++)t[r]===null&&(t[r]=r?t[r-1]:D.get(e,s));return t}var jt=t=>Array.isArray(t)?t:[t];function bt(t,e,s,r={}){let{duration:o=m.duration,delay:n=m.delay,endDelay:i=m.endDelay,repeat:p=m.repeat,easing:d=m.easing,direction:g,offset:b,allowWebkitAcceleration:M=!1}=r,y=R(t),f=U.waapi(),h=w,P=tt(e);P&&(K[e]&&(e=K[e]),et(t,e),e=C(e));let c=j.get(e),a=xt(jt(s),t,e);Nt(y,e),L(e)?(h=ot(t,e),U.cssRegisterProperty()?rt(e):f=!1):h=at(t,e);let l;if(f){c&&(a=a.map(A=>typeof A=="number"?c.toDefaultUnit(A):A)),!U.partialKeyframes()&&a.length===1&&a.unshift(D.get(t,e));let u={delay:O(n),duration:O(o),endDelay:O(i),easing:v(d)?void 0:W(d),direction:g,iterations:p+1,fill:"forwards"};l=t.animate({[e]:a,offset:b,easing:v(d)?d.map(W):void 0},u),l.finished||(l.finished=new Promise((A,V)=>{l.onfinish=A,l.oncancel=V}));let S=a[a.length-1];l.finished.then(()=>h(S)).catch(w),M||(l.playbackRate=1.000001)}else if(P&&a.every(qt)){if(a.length===1&&a.unshift(D.get(t,e)||(c==null?void 0:c.initialValue)||0),a=a.map(u=>typeof u=="string"?parseFloat(u):u),c){let u=h;h=S=>u(c.toDefaultUnit(S))}l=yt(h,a,r)}else{let u=a[a.length-1];h(c&&typeof u=="number"?c.toDefaultUnit(u):u)}return y.activeAnimations[e]=l,l==null||l.finished.then(()=>y.activeAnimations[e]=void 0).catch(w),l}function Nt(t,e){t.activeAnimations[e]&&(k(t.activeAnimations[e]),t.activeAnimations[e]=void 0)}var qt=t=>typeof t=="number";var vt=(t,e)=>t[e]?Object.assign(Object.assign({},t),t[e]):Object.assign({},t);function Tt(t,e){var s;return typeof t=="string"?e?((s=e[t])!==null&&s!==void 0||(e[t]=document.querySelectorAll(t)),t=e[t]):t=document.querySelectorAll(t):t instanceof Element&&(t=[t]),Array.from(t)}var Et=(t,e)=>new Proxy({animations:t,duration:e},Kt),St=t=>t.animations[0],Kt={get:(t,e)=>{var s,r;switch(e){case"duration":return t.duration;case"currentTime":let o=((s=St(t))===null||s===void 0?void 0:s[e])||0;return o?o/1e3:0;case"playbackRate":return(r=St(t))===null||r===void 0?void 0:r[e];case"finished":return t.finished||(t.finished=Promise.all(t.animations.map(Wt)).catch(w)),t.finished;case"stop":return()=>t.animations.forEach(k);default:return()=>t.animations.forEach(n=>n[e]())}},set:(t,e,s)=>{switch(e){case"currentTime":s=O(s);case"currentTime":case"playbackRate":for(let r=0;r<t.animations.length;r++)t.animations[r][e]=s;return!0}return!1}},Wt=t=>t.finished;function At(t,e,s){return typeof t=="function"?t(e,s):t}function H(t,e,s={}){var r;t=Tt(t);let o=[],n=t.length;for(let i=0;i<n;i++){let p=t[i];for(let d in e){let g=vt(s,d);g.delay=At(g.delay,i,n);let b=bt(p,d,e[d],g);b&&o.push(b)}}return Et(o,(r=s.duration)!==null&&r!==void 0?r:m.duration)}var wt=(Math.random()*1e4).toString().substr(0,4),T,G,J=!0,F=new Peer(wt),E=document.getElementById("localVideo"),N=document.getElementById("remoteVideo"),_t=document.getElementById("callButton"),Xt=document.getElementById("answer"),Zt=document.getElementById("camSwitch"),Ht=document.getElementById("hangUp"),Gt=document.getElementById("toggleFullScreen"),Jt=document.getElementById("input"),Qt=document.getElementById("number");function Ot(t){H(E,{x:110,y:110,scale:.2},{duration:.5}),N.classList.add("active"),N.srcObject=t}window.onload=async()=>{T=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0})};var Yt=document.createTextNode(wt);Qt.appendChild(Yt);Zt.addEventListener("click",async()=>{J=!J,E.srcObject.getTracks().forEach(t=>{t.stop()}),T=await navigator.mediaDevices.getUserMedia({audio:!0,video:{facingMode:J?"user":"environment"}}),E.srcObject=T});Gt.addEventListener("click",()=>te());function te(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()}_t.onclick=()=>{E.srcObject=T,G=F.call(Jt.value,T),G.on("stream",Ot)};F.on("call",t=>{let e=document.createElement("H2"),s=document.createTextNode(`The ID ${t.peer} is calling...`);e.appendChild(s),document.body.appendChild(e),Xt.addEventListener("click",()=>{t.answer(T),E.srcObject=T,t.on("stream",Ot)})});Ht.addEventListener("click",()=>{G.close(),F.disconnect(),E.srcObject=null,N.srcObject=null});F.on("close",()=>{F.disconnect(),E.srcObject=null,N.srcObject=null});})();

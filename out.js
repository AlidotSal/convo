(()=>{var a=(Math.random()*1e4).toString().substr(0,4),c=new Peer(a),n=document.getElementById("localVideo"),r=document.getElementById("remoteVideo"),l=document.getElementById("callButton"),d=document.getElementById("input");l.onclick=()=>{navigator.mediaDevices.getUserMedia({video:!0,audio:!0},e=>{n.srcObject=e,c.call("another-peers-id",e).on("stream",o=>{r.srcObject=o})},e=>{console.error("Failed to get local stream",e)})};c.on("call",e=>{navigator.mediaDevices.getUserMedia({video:!0,audio:!0},t=>{e.answer(t),n.srcObject=t,e.on("stream",o=>{r.srcObject=o})},t=>{console.error("Failed to get local stream",t)})});})();

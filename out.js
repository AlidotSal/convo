(()=>{var q=new WeakMap;function k(t){return q.has(t)||q.set(t,{activeTransforms:[],activeAnimations:{}}),q.get(t)}function Q(t,e){t.indexOf(e)===-1&&t.push(e)}var O=()=>{},x=t=>t;var It=["","X","Y","Z"],Pt=["translate","scale","rotate","skew"],K={x:"translateX",y:"translateY",z:"translateZ"},Y={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:t=>t+"deg"},Dt={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:t=>t+"px"},rotate:Y,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:x},skew:Y},j=new Map,R=t=>`--motion-${t}`,C=["x","y","z"];Pt.forEach(t=>{It.forEach(e=>{C.push(t+e),j.set(R(t+e),Dt[t])})});var Ft=(t,e)=>C.indexOf(t)-C.indexOf(e),Vt=new Set(C),tt=t=>Vt.has(t),et=(t,e)=>{let{activeTransforms:s}=k(t);Q(s,e),t.style.transform=Mt(s)},Mt=t=>t.sort(Ft).reduce(Bt,"").trim(),Bt=(t,e)=>`${t} ${e}(var(${R(e)}))`;var L=t=>t.startsWith("--"),st=new Set;function rt(t){if(!st.has(t)){st.add(t);try{let{syntax:e,initialValue:s}=j.has(t)?j.get(t):{};CSS.registerProperty({name:t,inherits:!1,syntax:e,initialValue:s})}catch(e){}}}var I=t=>t*1e3;function U(t){try{t.playState!=="finished"&&t.commitStyles(),t.cancel()}catch(e){}}var kt=t=>Array.isArray(t)&&typeof t[0]=="number",T=t=>Array.isArray(t)&&typeof t[0]!="number",W=t=>kt(t)?Rt(t):t,Rt=([t,e,s,r])=>`cubic-bezier(${t}, ${e}, ${s}, ${r})`;var it=t=>document.createElement("div").animate(t,{duration:.001}),nt={cssRegisterProperty:()=>typeof CSS!="undefined"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{it({opacity:[1]})}catch(t){return!1}return!0},finished:()=>Boolean(it({opacity:[0,1]}).finished)},_={},z=Object.keys(nt).reduce((t,e)=>(t[e]=()=>(_[e]===void 0&&(_[e]=nt[e]()),_[e]),t),{});var ot=(t,e)=>s=>t.style.setProperty(e,s),at=(t,e)=>s=>t.style[e]=s;var m={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"};var ct=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,Ct=1e-7,Lt=12;function Ut(t,e,s,r,o){let n,i,p=0;do i=e+(s-e)/2,n=ct(i,r,o)-t,n>0?s=i:e=i;while(Math.abs(n)>Ct&&++p<Lt);return i}function P(t,e,s,r){if(t===e&&s===r)return x;let o=n=>Ut(n,0,1,t,s);return n=>n===0||n===1?n:ct(o(n),e,r)}var lt=(t,e,s)=>Math.min(Math.max(s,t),e);var mt=(t,e="end")=>s=>{s=e==="end"?Math.min(s,.999):Math.max(s,.001);let r=s*t,o=e==="end"?Math.floor(r):Math.ceil(r);return lt(0,1,o/t)};var ut={ease:P(.25,.1,.25,1),"ease-in":P(.42,0,1,1),"ease-in-out":P(.42,0,.58,1),"ease-out":P(0,0,.58,1)},zt=/\((.*?)\)/;function X(t){if(typeof t=="function")return t;if(Array.isArray(t))return P(...t);if(ut[t])return ut[t];if(t.startsWith("steps")){let e=zt.exec(t);if(e){let s=e[1].split(",");return mt(parseFloat(s[0]),s[1].trim())}}return x}var $=(t,e,s)=>-s*t+s*e+t;var N=(t,e,s)=>e-t==0?1:(s-t)/(e-t);var ft=(t,e,s)=>{let r=e-t;return((s-t)%r+r)%r+t};function pt(t,e){return T(t)?t[ft(0,t.length,e)]:t}function Z(t,e){let s=t[t.length-1];for(let r=1;r<=e;r++){let o=N(0,e,r);t.push($(s,1,o))}}function dt(t){let e=[0];return Z(e,t-1),e}var $t=t=>Math.min(1,Math.max(t,0));function ht(t,e=dt(t.length),s=x){let r=t.length,o=r-e.length;return o>0&&Z(e,o),n=>{let i=0;for(;i<r-2&&!(n<e[i+1]);i++);let p=$t(N(e[i],e[i+1],n));return p=pt(s,i)(p),$(t[i],t[i+1],p)}}var gt=class{constructor(e,s,{easing:r=m.easing,duration:o=m.duration,delay:n=m.delay,endDelay:i=m.endDelay,offset:p,repeat:d=m.repeat,direction:g="normal"}){this.startTime=0,this.rate=1,this.t=0,this.cancelT=0,this.playState="idle",this.finished=new Promise((y,f)=>{this.resolve=y,this.reject=f});let v=o*(d+1),M=ht(s,p,T(r)?r.map(X):X(r));this.tick=y=>{if(this.playState==="finished"){let B=M(1);e(B),this.resolve(B);return}this.pauseTime&&(y=this.pauseTime);let f=(y-this.startTime)*this.rate;this.t=f,f/=1e3,f=Math.max(f-n,0);let h=f/o,D=Math.floor(h),c=h%1;!c&&h>=1&&(c=1),c===1&&D--;let a=D%2;(g==="reverse"||g==="alternate"&&a||g==="alternate-reverse"&&!a)&&(c=1-c);let u=f>=v?1:Math.min(c,1),A=M(u);e(A),f>=v+i?(this.playState="finished",this.resolve(A)):this.playState!=="idle"&&requestAnimationFrame(this.tick)},this.play()}play(){let e=performance.now();this.playState="running",this.pauseTime?this.startTime=e-(this.pauseTime-this.startTime):this.startTime||(this.startTime=e),this.pauseTime=void 0,requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=performance.now()}finish(){this.playState="finished",this.tick(0)}cancel(){this.playState="idle",this.tick(this.cancelT),this.reject(!1)}reverse(){this.rate*=-1}commitStyles(){this.cancelT=this.t}get currentTime(){return this.t}set currentTime(e){this.pauseTime||this.rate===0?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}};function yt(t,e=[0,1],s={}){return new gt(t,e,s)}var F={get:(t,e)=>{let s=L(e)?t.style.getPropertyValue(e):getComputedStyle(t)[e];if(!s&&s!==0){let r=j.get(e);r&&(s=r.initialValue)}return s}};function xt(t,e,s){for(let r=0;r<t.length;r++)t[r]===null&&(t[r]=r?t[r-1]:F.get(e,s));return t}var jt=t=>Array.isArray(t)?t:[t];function bt(t,e,s,r={}){let{duration:o=m.duration,delay:n=m.delay,endDelay:i=m.endDelay,repeat:p=m.repeat,easing:d=m.easing,direction:g,offset:v,allowWebkitAcceleration:M=!1}=r,y=k(t),f=z.waapi(),h=O,D=tt(e);D&&(K[e]&&(e=K[e]),et(t,e),e=R(e));let c=j.get(e),a=xt(jt(s),t,e);Nt(y,e),L(e)?(h=ot(t,e),z.cssRegisterProperty()?rt(e):f=!1):h=at(t,e);let l;if(f){c&&(a=a.map(w=>typeof w=="number"?c.toDefaultUnit(w):w)),!z.partialKeyframes()&&a.length===1&&a.unshift(F.get(t,e));let u={delay:I(n),duration:I(o),endDelay:I(i),easing:T(d)?void 0:W(d),direction:g,iterations:p+1,fill:"forwards"};l=t.animate({[e]:a,offset:v,easing:T(d)?d.map(W):void 0},u),l.finished||(l.finished=new Promise((w,B)=>{l.onfinish=w,l.oncancel=B}));let A=a[a.length-1];l.finished.then(()=>h(A)).catch(O),M||(l.playbackRate=1.000001)}else if(D&&a.every(qt)){if(a.length===1&&a.unshift(F.get(t,e)||(c==null?void 0:c.initialValue)||0),a=a.map(u=>typeof u=="string"?parseFloat(u):u),c){let u=h;h=A=>u(c.toDefaultUnit(A))}l=yt(h,a,r)}else{let u=a[a.length-1];h(c&&typeof u=="number"?c.toDefaultUnit(u):u)}return y.activeAnimations[e]=l,l==null||l.finished.then(()=>y.activeAnimations[e]=void 0).catch(O),l}function Nt(t,e){t.activeAnimations[e]&&(U(t.activeAnimations[e]),t.activeAnimations[e]=void 0)}var qt=t=>typeof t=="number";var vt=(t,e)=>t[e]?Object.assign(Object.assign({},t),t[e]):Object.assign({},t);function Tt(t,e){var s;return typeof t=="string"?e?((s=e[t])!==null&&s!==void 0||(e[t]=document.querySelectorAll(t)),t=e[t]):t=document.querySelectorAll(t):t instanceof Element&&(t=[t]),Array.from(t)}var Et=(t,e)=>new Proxy({animations:t,duration:e},Kt),St=t=>t.animations[0],Kt={get:(t,e)=>{var s,r;switch(e){case"duration":return t.duration;case"currentTime":let o=((s=St(t))===null||s===void 0?void 0:s[e])||0;return o?o/1e3:0;case"playbackRate":return(r=St(t))===null||r===void 0?void 0:r[e];case"finished":return t.finished||(t.finished=Promise.all(t.animations.map(Wt)).catch(O)),t.finished;case"stop":return()=>t.animations.forEach(U);default:return()=>t.animations.forEach(n=>n[e]())}},set:(t,e,s)=>{switch(e){case"currentTime":s=I(s);case"currentTime":case"playbackRate":for(let r=0;r<t.animations.length;r++)t.animations[r][e]=s;return!0}return!1}},Wt=t=>t.finished;function At(t,e,s){return typeof t=="function"?t(e,s):t}function H(t,e,s={}){var r;t=Tt(t);let o=[],n=t.length;for(let i=0;i<n;i++){let p=t[i];for(let d in e){let g=vt(s,d);g.delay=At(g.delay,i,n);let v=bt(p,d,e[d],g);v&&o.push(v)}}return Et(o,(r=s.duration)!==null&&r!==void 0?r:m.duration)}var wt=(Math.random()*1e4).toString().substr(0,4),E,G,J=!0,V=new Peer(wt),S=document.getElementById("localVideo"),b=document.getElementById("remoteVideo"),_t=document.getElementById("callButton"),Xt=document.getElementById("answer"),Zt=document.getElementById("camera"),Ht=document.getElementById("mic"),Gt=document.getElementById("camSwitch"),Jt=document.getElementById("hangUp"),Qt=document.getElementById("toggleFullScreen"),Yt=document.getElementById("input"),te=document.getElementById("number");function Ot(t){H(S,{x:-120,y:150,scale:.2},{duration:.5}),b.classList.add("active"),b.srcObject=t}window.onload=async()=>{E=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0})};var ee=document.createTextNode(wt);te.appendChild(ee);Gt.addEventListener("click",async()=>{J=!J,S.srcObject.getTracks().forEach(t=>{t.stop()}),E=await navigator.mediaDevices.getUserMedia({audio:!0,video:{facingMode:J?"user":"environment"}}),S.srcObject=E});Zt.addEventListener("click",()=>{b.getVideoTracks()[0].enabled=!b.getVideoTracks()[0].enabled});Ht.addEventListener("click",async()=>{b.getAuduiTracks()[0].enabled=!b.getAudioTracks()[0].enabled});Qt.addEventListener("click",()=>se());function se(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()}_t.onclick=()=>{S.srcObject=E,G=V.call(Yt.value,E),G.on("stream",Ot)};V.on("call",t=>{let e=document.createElement("H2"),s=document.createTextNode(`The ID ${t.peer} is calling...`);e.appendChild(s),document.body.appendChild(e),Xt.addEventListener("click",()=>{t.answer(E),S.srcObject=E,t.on("stream",Ot)})});Jt.addEventListener("click",()=>{G.close(),V.disconnect(),S.srcObject=null,b.srcObject=null});V.on("close",()=>{V.disconnect(),S.srcObject=null,b.srcObject=null});})();

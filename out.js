(()=>{var d=(Math.random()*1e4).toString().substr(0,4),a=new Peer(d),n=document.getElementById("localVideo"),c=document.getElementById("remoteVideo"),r=document.getElementById("callButton"),l=document.getElementById("input"),i=document.getElementById("number"),s=document.createTextNode(d);i.appendChild(s);r.onclick=()=>{navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(e=>{n.srcObject=e,n.addEventListener("loadedmetadata",()=>{video.play()});let t=a.call(l.value,e);video.onloadedmetadata=function(o){video.play()},t.on("stream",o=>{c.srcObject=o})},e=>{console.error("Failed to get local stream",e)})};a.on("call",e=>{navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(t=>{e.answer(t),n.srcObject=t,e.on("stream",o=>{c.srcObject=o})},t=>{console.error("Failed to get local stream",t)})});})();

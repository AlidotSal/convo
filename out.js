(()=>{var o=(Math.random()*1e4).toString().substr(0,4),e,a=new Peer(o);window.onload=async()=>{e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0})};var n=document.getElementById("localVideo"),d=document.getElementById("remoteVideo"),r=document.getElementById("callButton"),i=document.getElementById("camSwitch"),l=document.getElementById("input"),s=document.getElementById("number"),m=document.createTextNode(o);s.appendChild(m);i.addEventListener("click",async()=>{n.srcObject.getTracks().forEach(t=>t.stop()),e=await navigator.mediaDevices.getUserMedia({audio:!0,video:{facingMode:{exact:"environment"}}})});r.onclick=()=>{n.srcObject=e,a.call(l.value,e).on("stream",c=>{d.srcObject=c})};a.on("call",t=>{t.answer(e),n.srcObject=e,t.on("stream",c=>{d.srcObject=c})});})();

(()=>{var a=(Math.random()*1e4).toString().substr(0,4),e,o=!0,r=new Peer(a),c=document.getElementById("localVideo"),d=document.getElementById("remoteVideo"),i=document.getElementById("callButton"),l=document.getElementById("camSwitch"),s=document.getElementById("input"),m=document.getElementById("number");window.onload=async()=>{e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0})};var u=document.createTextNode(a);m.appendChild(u);l.addEventListener("click",async()=>{o=!o,c.srcObject.getTracks().forEach(t=>{t.stop(),c.srcObject=null}),e=await navigator.mediaDevices.getUserMedia({audio:!0,video:{facingMode:o?"user":"environment"}}),c.srcObject=e});i.onclick=()=>{c.srcObject=e,r.call(s.value,e).on("stream",n=>{d.srcObject=n})};r.on("call",t=>{t.answer(e),c.srcObject=e,t.on("stream",n=>{d.srcObject=n})});})();
